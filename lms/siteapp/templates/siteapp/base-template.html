<!DOCTYPE html>
{% load static %}
{% load toast_tags %}
<html lang="en"
      class="light-style layout-navbar-fixed layout-menu-fixed layout-compact"
      dir="ltr"
      data-theme="theme-default"
      data-assets-path="{% static './' %}"
      data-template="vertical-menu-template-no-customizer-starter">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

    <title>{% block page-title %}{% endblock %}</title>

    <meta name="description" content=""/>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static './img/favicon/favicon.ico' %}">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
          rel="stylesheet"/>

    <link rel="stylesheet" href="{% static './vendor/fonts/boxicons.css' %}"/>

    <!-- Core CSS -->
    <link rel="stylesheet" href="{% static './vendor/css/rtl/core.css' %}" class="template-customizer-core-css"/>
    <link rel="stylesheet" href="{% static './vendor/css/rtl/theme-default.css' %}"
          class="template-customizer-theme-css"/>
    <link rel="stylesheet" href="{% static './css/demo.css' %}"/>

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="{% static './vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}"/>

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="{% static './vendor/js/helpers.js' %}"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="{% static './vendor/js/template-customizer.js' %}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="{% static './js/config.js' %}"></script>
    <!-- Custom CSS-->

    <link rel="stylesheet" href="{% static './vendor/libs/toastr/toastr.css' %}"/>
    {% block extra_css %}
    {% endblock %}
</head>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <!-- Menu -->

        <!-- Sidebar Nav -->
        {% include 'siteapp/template_parts/_sidebar.html' %}
        <!-- Sidebar Nav -->
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
            <!-- Navbar -->

            <!-- Main Header -->
            {% include 'siteapp/template_parts/_header.html' %}
            <!-- Main Header -->

            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper">
                <!-- Content -->
                {% block content %}{% endblock %}

                <!-- / Content -->

                <!-- Footer -->
                {% include 'siteapp/template_parts/_footer.html' %}
                <!-- / Footer -->

                <div class="content-backdrop fade"></div>
            </div>
            <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>

    <!-- Drag Target Area To SlideIn Menu On Small Screens -->
    <div class="drag-target"></div>
</div>
<!-- / Layout wrapper -->

<!--toast -->
{% if messages %}
<div id="messages">
    {% for message in messages %}
    <div class="bs-toast toast fade position-absolute top-0 end-0 m-3"
         data-bs-delay="5000" data-bs-autohide="true" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header {{ message.tags }}">
            <strong class="me-auto">{{ message.level|toast_title }}</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            {{ message|safe }}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
<!--toast -->

<!-- Core JS -->
<!-- build:js assets/vendor/js/core.js -->
<script src="{% static './vendor/libs/jquery/jquery.js' %}"></script>
<script src="{% static './vendor/libs/popper/popper.js' %}"></script>
<script src="{% static './vendor/js/bootstrap.js' %}"></script>
<script src="{% static './vendor/libs/perfect-scrollbar/perfect-scrollbar.js' %}"></script>
<script src="{% static './vendor/libs/hammer/hammer.js' %}"></script>

<script src="{% static './vendor/js/menu.js' %}"></script>

<script href="{% static './vendor/libs/toastr/toastr.js' %}"></script>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        // Получаем все элементы с классом "toast"
        const toastElements = document.querySelectorAll('.toast');

        toastElements.forEach(toastEl => {
            // Инициализация Bootstrap Toast
            const toast = new bootstrap.Toast(toastEl);

            // Показ Toast
            toast.show();
        });
    });
</script>

<!-- endbuild -->

<!-- Vendors JS -->

<!-- Main JS -->
<script src="{% static './js/main.js' %}"></script>
<script>

    document.addEventListener('DOMContentLoaded', function () {
        const forms = document.querySelectorAll('form');

        forms.forEach(form => {
            form.addEventListener('submit', function (event) {
                const submitButton = form.querySelector('button[type="submit"], input[type="submit"]');

                if (submitButton) {
                    submitButton.disabled = true;
                    submitButton.innerHTML = `
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        <span class="visually-hidden">Loading...</span>
                    `;
                }
            });
        });
    });
</script>
<!-- Custom JS-->
{% block extra_js %}{% endblock %}
</body>
</html>
