{% extends 'school/base-template.html' %}
{% load static %}
{% block extra_css %}
<!--  Custom  -->
<link rel="stylesheet" href="{% static './vendor/libs/quill/typography.css' %}"/>
<link rel="stylesheet" href="{% static './vendor/libs/quill/katex.css' %}"/>
<link rel="stylesheet" href="{% static './vendor/libs/quill/editor.css' %}"/>
{% endblock %}

{% block page-title %}{{ title }}{% endblock %}

{% block content %}
<div class="container-fluid flex-grow-1 container-p-y">
    <div class="card mb-4">
        <div class="card-body">
            <div class=" d-flex flex-wrap justify-content-between align-items-center gap-3 w-100">
                <h1 class="h2 m-0">Schedule</h1>
                <a href="{% url 'school:lesson-add' %}" class="btn btn-primary">Add lesson</a>
            </div>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb m-0">
                </ol>
            </nav>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-3">
            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="h5 card-title m-0">Calendar</h2>
                </div>
                <hr class="m-0">
                <div class="card-body">
                    <form action="{% url 'school:main' %}" method="GET">
                        <label for="lessons-date" class="form-label">Choose date</label>
                        <div class="d-flex gap-1">
                            <input id="lessons-date" name="date" type="date" class="form-control mb-1" placeholder="YYYY-MM-DD"
                                   value="{{date|date:'Y-m-d'}}">
                            <button type="submit" class="btn btn-icon btn-outline-primary"><span
                                    class=" tf-icons bx bx-search"></span></button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">
                    <h2 class="h5 card-title mb-0">Wallet</h2>
                </div>
                <hr class="m-0">
                <div class="card-body d-flex align-items-end justify-content-between">
                    <div class="d-flex justify-content-between align-items-center gap-3 w-100">
                        <div class="d-flex align-content-center w-50" style="position: relative;">
                            <div class="chart-info">
                                <h5 class="mb-0">$120</h5>
                                <small class="text-muted">Today</small>
                            </div>
                        </div>
                        <div class="d-flex align-content-center w-50" style="position: relative;">
                            <div class="chart-info">
                                <h5 class="mb-0">$640</h5>
                                <small class="text-muted">Month</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-9">
            <div class="card">
                <div class="card-header d-flex flex-wrap justify-content-between align-items-center w-100 gap-3">
                    <span class="h5 m-0">{{date|date:"d.m.Y"}}</span>
                </div>
                <hr class="m-0">
                {% if lessons %}
                <div class="card-table">
                    <div class="table-responsive text-nowrap">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>Time</th>
                                <th>Status</th>
                                <th>Students</th>
                                <th class="text-center" style="width: 1%;">Actions</th>
                            </tr>
                            </thead>
                            <tbody class="table-border-bottom-0">
                            {% for lesson in lessons %}
                            <tr>
                                <td>{{ lesson.time|time:"H:i" }}</td>
                                <td><span class="badge bg-label-info">{{ lesson.status }}</span></td>
                                <td>John Dou, Samanta Clark</td>
                                <td style="width: 1%;">
                                    <div class="dropdown btn-group">
                                        <a href="#" class="btn btn-icon btn-outline-secondary"
                                           data-bs-toggle="modal" data-bs-target="#lessonDetail">
                                            <i class='bx bx-show'></i>
                                        </a>
                                        <button type="button"
                                                class="btn btn-icon btn-outline-secondary p-0 dropdown-toggle hide-arrow"
                                                data-bs-toggle="dropdown" aria-expanded="true">
                                            <i class="bx bx-dots-vertical-rounded"></i>
                                        </button>
                                        <div class="dropdown-menu hide"
                                             data-popper-placement="bottom-start"
                                             style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(1225px, 139px);">
                                            <a class="dropdown-item" href="javascript:void(0);"
                                               data-bs-toggle="modal" data-bs-target="#success"><i
                                                    class="bx bx-check me-1"></i> Complete</a>
                                            <a class="dropdown-item" href="javascript:void(0);"
                                               data-bs-toggle="modal" data-bs-target="#missed"><i
                                                    class="bx bx-x me-1"></i> Miss</a>
                                            <a class="dropdown-item" href="javascript:void(0);"
                                               data-bs-toggle="modal" data-bs-target="#newLesson"><i
                                                    class="bx bx-edit-alt me-1"></i>Edit</a>
                                            <a class="dropdown-item" href="javascript:void(0);"
                                               data-bs-toggle="modal" data-bs-target="#move"><i
                                                    class="bx bx-right-arrow-circle me-1"></i>Move</a>
                                            <a class="dropdown-item" href="javascript:void(0);"
                                               data-bs-toggle="modal" data-bs-target="#delete"><i
                                                    class="bx bx-trash me-1"></i> Delete</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                {% else %}
                <div class="card-body">
                    Lesson list is empty
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="lessonDetail" tabindex="-1" aria-labelledby="lessonDetailLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-centered-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="lessonDetailLabel">Lesson Detail | ID: 45 |</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-3">
                        <h5 class="mb-2">Date</h5>
                        <p class="mb-0"><i class='bx bx-calendar me-1'></i>28.03.2024</p>
                        <p class="mb-0"><i class='bx bx-time-five me-1'></i>12:00</p>
                        <hr class="mt-3 mb-3">
                        <h5 class="mb-2">Status</h5>
                        <p class="mb-0"><span class="badge bg-label-info">SCHEDULED</span></p>
                        <hr class="mt-3 mb-3">
                        <h5 class="mb-2">Students</h5>
                        <ul class="list-unstyled m-0">
                            <li><a href="#">John Dou</a></li>
                            <li><a href="#">Samanta Clark</a></li>
                        </ul>
                        <hr class="mt-3 mb-3">
                        <h5 class="mb-2">Duration</h5>
                        <p class="mb-0">45 min</p>
                    </div>
                    <div class="col-lg-9">
                        <h5 class="mb-2">Theme</h5>
                        <p class="m-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                        <hr class="mt-3 mb-3">
                        <h5 class="mb-2">Notes</h5>
                        <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Autem consectetur delectus
                            error, molestiae temporibus veniam vitae. Ad aliquid architecto autem consequuntur corporis,
                            cum dolorum eius enim esse facilis harum id ipsum magnam minima molestiae officiis
                            perspiciatis quae quisquam sapiente tempora. Animi harum pariatur quasi sed voluptate?
                            Consectetur dicta ipsam velit!</p>
                        <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Autem consectetur delectus
                            error, molestiae temporibus veniam vitae. Ad aliquid architecto autem consequuntur corporis,
                            cum dolorum eius enim esse facilis harum id ipsum magnam minima molestiae officiis
                            perspiciatis quae quisquam sapiente tempora. Animi harum pariatur quasi sed voluptate?
                            Consectetur dicta ipsam velit!</p>
                        <p class="m-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Autem consectetur
                            delectus error, molestiae temporibus veniam vitae. Ad aliquid architecto autem consequuntur
                            corporis, cum dolorum eius enim esse facilis harum id ipsum magnam minima molestiae officiis
                            perspiciatis quae quisquam sapiente tempora. Animi harum pariatur quasi sed voluptate?
                            Consectetur dicta ipsam velit!</p>
                        <hr class="mt-3 mb-3">
                        <h5 class="mb-2">Homework</h5>
                        <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium aliquid amet
                            aperiam assumenda blanditiis, cum dicta dignissimos dolor ducimus excepturi explicabo harum
                            labore maiores maxime molestias nam neque non officia officiis pariatur praesentium
                            provident quas qui quidem quos reiciendis sequi sint totam vitae voluptate. Animi at
                            molestias necessitatibus odio tempore!</p>
                        <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium aliquid amet
                            aperiam assumenda blanditiis, cum dicta dignissimos dolor ducimus excepturi explicabo harum
                            labore maiores maxime molestias nam neque non officia officiis pariatur praesentium
                            provident quas qui quidem quos reiciendis sequi sint totam vitae voluptate. Animi at
                            molestias necessitatibus odio tempore!</p>
                        <p class="m-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium aliquid
                            amet aperiam assumenda blanditiis, cum dicta dignissimos dolor ducimus excepturi explicabo
                            harum labore maiores maxime molestias nam neque non officia officiis pariatur praesentium
                            provident quas qui quidem quos reiciendis sequi sint totam vitae voluptate. Animi at
                            molestias necessitatibus odio tempore!</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="d-flex flex-wrap justify-content-between w-100 gap-3">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <div class="btn-group">
                        <a class="btn btn-icon btn-outline-secondary" href="javascript:void(0);" data-bs-toggle="modal"
                           data-bs-target="#success" title="Complete"><i class="bx bx-check"></i></a>
                        <a class="btn btn-icon btn-outline-secondary" href="javascript:void(0);" data-bs-toggle="modal"
                           data-bs-target="#missed" title="Miss"><i class="bx bx-x"></i></a>
                        <a class="btn btn-icon btn-outline-secondary" href="javascript:void(0);" data-bs-toggle="modal"
                           data-bs-target="#newLesson" title="Edit"><i class="bx bx-edit-alt"></i></a>
                        <a class="btn btn-icon btn-outline-secondary" href="javascript:void(0);" data-bs-toggle="modal"
                           data-bs-target="#move" title="Move"><i class="bx bx-right-arrow-circle"></i></a>
                        <a class="btn btn-icon btn-outline-secondary" href="javascript:void(0);" data-bs-toggle="modal"
                           data-bs-target="#delete" title="Delete"><i class="bx bx-trash"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / Modal -->
<!-- Modal Success -->
<div class="modal fade" id="success" tabindex="-1" aria-labelledby="successLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="successLabel">Was the lesson successful?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <form action="#" method="post">
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <div class="d-flex flex-wrap justify-content-between w-100 gap-3">
                        <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Success</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- / Modal Success -->
<!-- Modal Missed -->
<div class="modal fade" id="missed" tabindex="-1" aria-labelledby="missedLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="missedLabel">Student miss class?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <form action="#" method="post">
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <div class="d-flex flex-wrap justify-content-between w-100 gap-3">
                        <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-danger">Missed</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- / Modal Missed -->
<!-- Modal Delete -->
<div class="modal fade" id="delete" tabindex="-1" aria-labelledby="deleteLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteLabel">Are you sure you want to delete this lesson?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <form action="#" method="post">
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <div class="d-flex flex-wrap justify-content-between w-100 gap-3">
                        <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- / Modal Delete -->
<!-- Modal Delete -->
<div class="modal fade" id="move" tabindex="-1" aria-labelledby="moveLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="moveLabel">Move the lesson to another time</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <form action="#" method="post">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="date" class="form-label">Date</label>
                        <input type="date" class="form-control" id="date" placeholder="28.03.2024"
                               aria-describedby="date">
                    </div>
                    <div class="mb-3">
                        <label for="time" class="form-label">Time</label>
                        <input type="time" class="form-control" id="time" placeholder="12:00" aria-describedby="time">
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="d-flex flex-wrap justify-content-between w-100 gap-3">
                        <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Move</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- / Modal Delete -->
{% endblock %}
{% block extra_js %}
<script src="{% static './js/forms-pickers.js' %}"></script>
<script src="{% static './js/ui-modals.js' %}"></script>
<script src="{% static './vendor/libs/flatpickr/flatpickr.js' %}"></script>
<script src="{% static './vendor/libs/quill/quill.js' %}"></script>
<script src="{% static './vendor/libs/quill/katex.js' %}"></script>

{% endblock %}